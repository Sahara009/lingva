import { useEffect, useRef } from "react";
import { motion } from "framer-motion";
import gsap from "gsap";
import ScrollTrigger from "gsap/ScrollTrigger";
import { ArrowRight, Globe, BookOpen, GraduationCap } from "lucide-react";
import styles from "./CoursesPage.module.scss";
import { Link } from "react-router-dom";

gsap.registerPlugin(ScrollTrigger);

export const CoursesPage = () => {
  const pageRef = useRef<HTMLElement | null>(null);
  const sectionsRef = useRef<(HTMLElement | null)[]>([]);

  useEffect(() => {
    window.scrollTo(0, 0);

    const ctx = gsap.context(() => {
      // Page fade in
      gsap.from(pageRef.current, {
        opacity: 0,
        y: 20,
        duration: 0.7,
        ease: "power2.out",
      });

      // Section animations еуавыав
      sectionsRef.current.forEach((sec, i) => {
        if (sec) {
          gsap.from(sec, {
            opacity: 0,
            y: 40,
            duration: 0.7,
            ease: "power3.out",
            delay: i * 0.1,
            scrollTrigger: {
              trigger: sec,
              start: "top 85%",
            },
          });
        }
      });
    });

    return () => ctx.revert();
  }, []);

  return (
    <main className={styles.page} ref={pageRef}>
      <div className={styles.container}>
        {/* Header */}
        <section
          className={styles.header}
          ref={(el) => {
            sectionsRef.current[0] = el;
          }}
        >
          <motion.h1
            initial={{ scale: 1 }}
            animate={{ scale: [1, 1.02, 1] }}
            transition={{
              duration: 3,
              repeat: Infinity,
              ease: "easeInOut",
            }}
          >
            Курсы
          </motion.h1>
          <motion.p
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.3, duration: 0.8 }}
          >
            Мы сотрудничаем с высококвалифицированными преподавателями, которые
            специализируются на обучении иностранным языкам неносителей и имеют
            большой практический опыт. Многие из наших преподавателей обладают
            научными степенями и международной преподавательской квалификацией.
          </motion.p>
        </section>

        {/* Introduction Section */}
        <section
          className={styles.introSection}
          ref={(el) => {
            sectionsRef.current[1] = el;
          }}
        >
          <p>
            Наша методика обучения основана на полном погружении в язык, без
            использования языка-посредника. Такой подход позволяет учащимся
            быстрее и эффективнее осваивать язык, развивать мышление на
            изучаемом языке и глубже понимать его особенности.
          </p>
          <p>
            Учебные материалы и учебники мы отбираем особенно тщательно. В
            обучении используются современные, проверенные программы, которые
            популярны и востребованы во многих странах мира и применяются в
            ведущих учебных заведениях и вузах.
          </p>
          <p>
            Страны для прохождения языковых курсов мы подбираем с учётом
            безопасности, комфортных условий проживания и благоприятной языковой
            среды. Школы, с которыми мы сотрудничаем и в которые направляем
            студентов, выбираются по строгим критериям: высокий уровень
            преподавания, поддержка иностранных студентов и качественное
            знакомство с культурой страны.
          </p>
        </section>

        {/* Arabic Language */}
        <section
          className={styles.languageSection}
          ref={(el) => {
            sectionsRef.current[2] = el;
          }}
        >
          <h2 className={styles.languageTitle}>Арабский язык</h2>

          <div className={styles.courseType}>
            <h3>
              <Globe className={styles.icon} />
              Оффлайн-обучение
            </h3>
            <p>
              Мы сотрудничаем с зарубежными языковыми школами, где можно пройти
              обучение в течение короткого срока. Мы подбираем страну и школу
              индивидуально, с учётом целей, уровня и потребностей изучающего
              язык. Также помогаем с подбором проживания и решаем все
              организационные вопросы. Такой формат обучения даёт студентам
              возможность погрузиться в арабскую языковую среду, познакомиться с
              культурой арабских стран и изучать язык в естественной обстановке.
            </p>
          </div>

          <div className={styles.courseType}>
            <h3>
              <BookOpen className={styles.icon} />
              Онлайн-обучение
            </h3>
            <p>
              Онлайн-курсы проводят носители арабского языка. Все занятия
              проходят полностью на арабском языке, без использования
              языка-посредника. Методика обучения основана на прямом погружении
              в язык и построена на учебниках «Мифтах аль-арабийя». Студенты
              могут выбрать индивидуальные или групповые занятия в зависимости
              от своих целей и предпочтений.
            </p>
          </div>

          <div className={styles.courseType}>
            <h3>
              <GraduationCap className={styles.icon} />
              Тематические курсы
            </h3>
            <p>
              Тематические курсы — это онлайн-программы, направленные на
              изучение арабского языка в конкретных сферах, таких как медиа,
              медицина, торговля, туризм и другие. Такие курсы помогают углубить
              знания языка и развить профессиональную лексику и навыки в той
              области, в которой студент планирует специализироваться или
              работать.
            </p>
          </div>
        </section>

        {/* Turkish Language */}
        <section
          className={styles.languageSection}
          ref={(el) => {
            sectionsRef.current[3] = el;
          }}
        >
          <h2 className={styles.languageTitle}>Турецкий язык</h2>

          <div className={styles.courseType}>
            <h3>
              <Globe className={styles.icon} />
              Офлайн-обучение
            </h3>
            <p>
              В этом направлении наша школа сотрудничает с языковыми школами в
              Турции. По результатам консультации мы направляем студентов в
              подходящие турецкие школы, помогаем с размещением и решаем все
              сопутствующие организационные вопросы. Такой формат обучения
              позволяет студентам изучать турецкий язык в языковой среде,
              быстрее адаптироваться и лучше понимать культуру страны.
            </p>
          </div>

          <div className={styles.courseType}>
            <h3>
              <BookOpen className={styles.icon} />
              Онлайн-обучение
            </h3>
            <p>
              Онлайн-курсы проводят носители турецкого языка. Все занятия
              проходят полностью на турецком языке, без использования
              языка-посредника. Методика обучения основана на погружении в язык,
              что способствует более естественному и эффективному освоению речи.
              Студенты могут выбрать индивидуальные или групповые занятия в
              зависимости от целей и формата обучения.
            </p>
          </div>

          <div className={styles.courseType}>
            <h3>
              <GraduationCap className={styles.icon} />
              Тематические курсы
            </h3>
            <p>
              Тематические курсы — это онлайн-программы, направленные на
              изучение турецкого языка в определённых профессиональных сферах,
              таких как медиа, медицина, торговля, туризм и другие. Курсы
              помогают углубить знания языка, расширить словарный запас и
              развить навыки общения в той области, в которой студент планирует
              специализироваться или работать.
            </p>
          </div>
        </section>

        {/* English Language */}
        <section
          className={styles.languageSection}
          ref={(el) => {
            sectionsRef.current[4] = el;
          }}
        >
          <h2 className={styles.languageTitle}>Английский язык</h2>

          <div className={styles.courseType}>
            <h3>
              <Globe className={styles.icon} />
              Офлайн-обучение
            </h3>
            <p>
              В рамках офлайн-направления мы сотрудничаем с языковыми школами в
              странах, где английский язык является распространённым и активно
              используется в повседневной жизни, образовании и профессиональной
              сфере. По результатам консультации мы подбираем страну и школу
              индивидуально, с учётом целей, уровня подготовки и сроков обучения
              студента. Также помогаем с подбором проживания и решаем все
              организационные вопросы. Такой формат обучения позволяет
              погрузиться в языковую среду, улучшить разговорные навыки и
              уверенно использовать английский язык в реальных ситуациях
              общения.
            </p>
          </div>

          <div className={styles.courseType}>
            <h3>
              <BookOpen className={styles.icon} />
              Онлайн-обучение
            </h3>
            <p>
              Онлайн-курсы проводят квалифицированные преподаватели и носители
              английского языка. Занятия проходят полностью на английском языке,
              без использования языка-посредника. Методика обучения основана на
              коммуникативном подходе и полном языковом погружении, что помогает
              быстрее преодолеть языковой барьер и начать свободно говорить на
              английском языке. Студенты могут выбрать индивидуальные или
              групповые занятия в зависимости от целей обучения и
              предпочтительного формата.
            </p>
          </div>

          <div className={styles.courseType}>
            <h3>
              <GraduationCap className={styles.icon} />
              Тематические курсы
            </h3>
            <p>
              Тематические курсы — это онлайн-программы по английскому языку,
              ориентированные на определённые сферы, такие как бизнес, медиа,
              медицина, туризм и другие направления. Курсы помогают углубить
              знание языка, освоить профессиональную лексику и развить навыки
              общения в той области, в которой студент планирует работать,
              учиться или специализироваться.
            </p>
          </div>
        </section>

        {/* Travel and Learn */}
        <section
          className={styles.travelSection}
          ref={(el) => {
            sectionsRef.current[5] = el;
          }}
        >
          <h2>Программа «Путешествуй и учи»</h2>
          <p>
            «Путешествуй и учи» — это образовательный тур, который сочетает
            изучение иностранного языка и путешествие по стране, где на этом
            языке говорят. Программа проходит под руководством опытного гида и
            преподавателя. За время тура студенты за короткий срок осваивают
            основы иностранного языка, активно практикуют его в реальных
            ситуациях общения, знакомятся с культурой страны и открывают для
            себя новые места.
          </p>
        </section>

        {/* Russian Language for Non-Natives */}
        <section
          className={styles.languageSection}
          ref={(el) => {
            sectionsRef.current[6] = el;
          }}
        >
          <h2 className={styles.languageTitle}>Русский язык для неносителей</h2>
          <div className={styles.courseType}>
            <p>
              Мы проводим курсы русского языка для неносителей. Программа
              реализуется в формате летних школ, которые включают очные занятия
              в России, а также культурную и экскурсионную программу.
              Дополнительно мы организуем онлайн-разговорные клубы, направленные
              на развитие устной речи и поддержание языковой практики.
            </p>
          </div>
        </section>

        {/* Courses for Teachers */}
        <section
          className={styles.teachersSection}
          ref={(el) => {
            sectionsRef.current[7] = el;
          }}
        >
          <h2>Курсы для преподавателей иностранных языков</h2>
          <p>
            В рамках данной программы мы проводим онлайн-курсы для
            преподавателей иностранных языков, работающих с неносителями. Курсы
            включают современную методику преподавания иностранных языков,
            практические инструменты и подходы, направленные на эффективное
            обучение студентов разного уровня подготовки.
          </p>
        </section>

        {/* CTA */}
        <section
          className={styles.cta}
          ref={(el) => {
            sectionsRef.current[8] = el;
          }}
        >
          <h2>Готовы начать обучение?</h2>
          <p>Выберите язык и формат обучения, который подходит именно вам</p>
          <Link to={"https://t.me/bibliotekalingvaru"}>
            <button className={styles.button}>
              Выбрать курс <ArrowRight />
            </button>
          </Link>
        </section>
      </div>
    </main>
  );
};
